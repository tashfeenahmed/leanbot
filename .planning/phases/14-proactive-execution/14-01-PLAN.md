---
phase: 14-proactive-execution
plan: 01
type: execute
---

<objective>
Transform the agent into a proactive problem-solver that installs dependencies on-the-fly, tries alternative approaches when blocked, and asks users for clarification only when truly stuck.

Purpose: Current agent stops when encountering missing dependencies or blockers. A proactive agent should download what it needs, find workarounds, and only escalate to the user as a last resort.
Output: Updated system prompt with proactive execution guidelines.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior phase context
@.planning/phases/12-loop-until-done/12-01-SUMMARY.md
@.planning/phases/13-unified-triggers/13-01-SUMMARY.md

# Key files
@src/agent/agent.ts

**Tech stack available:**
- Bash skill can run any shell command including `npm install`
- Agent loops until [DONE] marker (Phase 12)
- Skills-only architecture (no tool fallback)

**Established patterns:**
- System prompt sections for different behaviors (REMINDERS, MEMORY, etc.)
- Explicit task completion via [DONE] marker
- Progress messages before skill invocations

**Decisions from prior phases:**
- Agent continues working until task complete (Phase 12)
- [DONE] marker signals explicit completion
- Backward compatible with single-turn responses
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add proactive execution guidelines to system prompt</name>
  <files>src/agent/agent.ts</files>
  <action>
Add a new "PROACTIVE EXECUTION" section to DEFAULT_SYSTEM_PROMPT after "EXECUTION RULES" section. The section should teach the agent to:

1. **Install missing dependencies automatically:**
   - If a command fails because a package isn't installed, use bash skill to install it
   - Examples: `npm install <package>`, `pip install <package>`, `brew install <tool>`
   - Don't ask permission for dev dependencies - just install them
   - For production dependencies that change package.json, install and inform user

2. **Try alternative approaches when blocked:**
   - API rate limited? Wait briefly, try again, or try different endpoint
   - Website blocked? Try different browser user-agent or different source
   - Command fails? Try equivalent command (e.g., `curl` instead of `wget`)
   - File locked? Wait a moment and retry
   - Never give up on first failure - try at least 2-3 alternatives

3. **Escalate to user only when truly stuck:**
   - Ask user only after trying multiple approaches
   - When asking, explain what you've tried and why it failed
   - Offer specific options rather than open-ended questions
   - Examples of when to ask: authentication needed, destructive operations, unclear requirements

4. **Self-healing behaviors:**
   - If workspace has package.json but node_modules is missing, run `npm install` first
   - If running a Python script and venv exists but isn't activated, activate it
   - If a config file is malformed, try to fix obvious issues

Add concrete examples showing proactive vs passive behavior.

Avoid: Making the section too long (aim for ~30-40 lines). Don't duplicate existing rules. Keep examples concise.
  </action>
  <verify>
Grep for "PROACTIVE EXECUTION" in agent.ts confirms new section exists.
Verify the section includes: dependency installation, alternative approaches, escalation guidance.
  </verify>
  <done>
New "PROACTIVE EXECUTION" section added to system prompt with:
- Dependency auto-install guidelines
- Alternative approach strategies
- Clear escalation criteria
- Concrete examples
  </done>
</task>

<task type="auto">
  <name>Task 2: Update EXECUTION RULES to reinforce proactive behavior</name>
  <files>src/agent/agent.ts</files>
  <action>
Modify the existing "EXECUTION RULES" section to add emphasis on proactive behavior:

1. Add new rule after "5. Keep trying until you succeed":
   - "6. Install what you need - if a dependency is missing, install it"
   - "7. Try alternatives - if one approach fails, try another before giving up"
   - "8. Ask only when truly blocked - explain what you tried first"

2. Update rule 5 to be more emphatic:
   - Change from "Keep trying until you succeed" to "NEVER give up on first failure. Try at least 2-3 different approaches before asking the user."

Keep the rules concise and action-oriented.
  </action>
  <verify>
Read agent.ts and confirm EXECUTION RULES section has 8 rules including the new proactive ones.
  </verify>
  <done>
EXECUTION RULES updated with proactive behavior emphasis:
- Rules 6, 7, 8 added for install/alternatives/ask-last
- Rule 5 strengthened to require multiple attempts
  </done>
</task>

<task type="auto">
  <name>Task 3: Add examples demonstrating proactive behavior to prompt</name>
  <files>src/agent/agent.ts</files>
  <action>
After the PROACTIVE EXECUTION section, add a brief "PROACTIVE EXAMPLES" section with 3-4 concrete before/after examples:

Example 1 - Missing dependency:
```
BAD: "I can't run prettier because it's not installed. Please run npm install prettier."
GOOD: *runs bash with "npm install -D prettier"* "I installed prettier. Now formatting your code..."
```

Example 2 - Command fails:
```
BAD: "The wget command failed. I cannot download the file."
GOOD: "wget failed, trying curl instead..." *runs bash with curl*
```

Example 3 - API blocked:
```
BAD: "The website blocked my request. I cannot help with this."
GOOD: "Direct fetch failed, let me try through the browser..." *uses browser skill*
```

Keep examples short (1-2 lines each). Use concrete skill names.
  </action>
  <verify>
Grep for "PROACTIVE EXAMPLES" in agent.ts confirms section exists.
Count at least 3 examples present.
  </verify>
  <done>
PROACTIVE EXAMPLES section added with 3+ concrete before/after examples demonstrating:
- Auto-installing missing dependencies
- Trying alternative commands
- Using different skills as fallback
  </done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] "PROACTIVE EXECUTION" section exists in system prompt
- [ ] "PROACTIVE EXAMPLES" section exists with 3+ examples
- [ ] EXECUTION RULES has 8 rules with proactive emphasis
- [ ] TypeScript compiles: `npm run build` succeeds
- [ ] Tests pass: `npm test` succeeds
</verification>

<success_criteria>

- System prompt teaches proactive dependency installation
- System prompt teaches trying alternatives before giving up
- System prompt clarifies when to ask user vs keep trying
- All tests pass
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/14-proactive-execution/14-01-SUMMARY.md`:

# Phase 14-01: Proactive Execution Summary

**[Substantive one-liner]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `src/agent/agent.ts` - Added PROACTIVE EXECUTION and PROACTIVE EXAMPLES sections

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Phase Readiness

[Ready for Phase 15: Human-like Messaging]
</output>
