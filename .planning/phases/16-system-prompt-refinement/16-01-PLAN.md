---
phase: 16-system-prompt-refinement
plan: 01
type: execute
---

<objective>
Simplify and consolidate the system prompt for achievement focus and personal assistant tone.

Purpose: The current prompt is 217 lines with scattered, redundant guidance. A cleaner prompt will be easier to maintain and produce more consistent agent behavior.
Output: Refined DEFAULT_SYSTEM_PROMPT that's ~50% shorter while preserving all essential guidance.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-proactive-execution/14-01-SUMMARY.md
@.planning/phases/15-human-like-messaging/15-01-SUMMARY.md
@src/agent/agent.ts

**Constraining decisions from prior phases:**
- Phase 14: Proactive behavior taught via prompt engineering (not code)
- Phase 15: No emojis in prompt, telegram_send for mid-conversation updates

**Current prompt structure (lines 67-284 in agent.ts):**
1. Core identity + SKILLS reference
2. REMINDERS section (tool usage)
3. AUTOMATIC MEMORY section
4. PERSONAL REFERENCES section
5. FOR WEB SEARCHES section
6. RESEARCH vs ACTION section
7. FALLBACK RULES section
8. EXECUTION RULES (8 rules)
9. TASK COMPLETION section ([DONE] marker)
10. PROGRESS UPDATES section
11. MESSAGING STYLE section
12. MULTIPLE MESSAGES section
13. FORMATTING RULES section
14. WEB BROWSING section
15. PROACTIVE EXECUTION section
16. PROACTIVE EXAMPLES section
17. CONVERSATIONAL EXAMPLES section

**Identified redundancies:**
- "NEVER give up" appears in multiple places
- Proactive behavior scattered across EXECUTION RULES, PROACTIVE EXECUTION, PROACTIVE EXAMPLES
- Messaging guidance in both MESSAGING STYLE and CONVERSATIONAL EXAMPLES
- Web search guidance in WEB SEARCHES, WEB BROWSING, and FALLBACK RULES
</context>

<tasks>

<task type="auto">
  <name>Task 1: Consolidate and restructure prompt sections</name>
  <files>src/agent/agent.ts</files>
  <action>
Rewrite DEFAULT_SYSTEM_PROMPT with consolidated structure:

**New structure (target: ~100-120 lines):**

1. **IDENTITY** (2-3 lines)
   - "You are a personal AI assistant with direct system access via skills."
   - Focus on autonomy and achievement

2. **SKILLS** (keep existing reference, tighten intro)

3. **HOW TO WORK** (consolidate EXECUTION RULES + PROACTIVE EXECUTION + FALLBACK RULES)
   - 5-6 clear rules max
   - Include: act immediately, install deps, try alternatives, ask only when stuck
   - Remove redundant "never give up" repetitions

4. **MEMORY** (consolidate AUTOMATIC MEMORY + PERSONAL REFERENCES)
   - Key point: facts auto-extracted, use memory_search for personal refs
   - 3-4 lines max

5. **TASK COMPLETION** (keep [DONE] marker guidance, tighten)
   - When to use [DONE], when to continue
   - 4-5 lines max

6. **COMMUNICATION** (consolidate MESSAGING STYLE + PROGRESS UPDATES + MULTIPLE MESSAGES + FORMATTING)
   - Key: short messages, progress updates before skills, telegram_send for mid-task
   - 8-10 lines max

7. **EXAMPLES** (consolidate PROACTIVE EXAMPLES + CONVERSATIONAL EXAMPLES)
   - Keep 4-6 best BAD/GOOD pairs
   - Remove repetitive examples

8. **REMINDERS** (keep essential guidance, tighten)
   - Reminder tool usage
   - 5-6 lines max

**What to remove:**
- Duplicate guidance about "not giving up"
- Redundant web search mentions (one consolidated section)
- WEB BROWSING section (redundant with SKILLS)
- RESEARCH vs ACTION section (merge into HOW TO WORK)
- Verbose explanations - use terse guidance

**Tone adjustments:**
- "You are a personal AI assistant" not "autonomous AI agent"
- Achievement-focused: "Get it done" attitude
- Remove formal language, keep casual but competent
  </action>
  <verify>wc -l measure of DEFAULT_SYSTEM_PROMPT shows ~100-120 lines (down from 217)</verify>
  <done>Prompt restructured with 8 consolidated sections, no redundant guidance, ~50% shorter</done>
</task>

<task type="auto">
  <name>Task 2: Verify agent still works correctly</name>
  <files>src/agent/agent.ts</files>
  <action>
Run existing tests to ensure prompt changes don't break agent:
1. Run npm test to verify agent tests pass
2. Check TypeScript compiles without errors
3. Verify the prompt still includes all skill references and [DONE] marker handling
  </action>
  <verify>npm test passes, npm run build succeeds</verify>
  <done>Tests pass, build succeeds, prompt compiles correctly</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm test` passes all tests
- [ ] Prompt line count is ~100-120 (down from 217)
- [ ] All 8 consolidated sections present
- [ ] [DONE] marker handling preserved
- [ ] Skills section preserved
- [ ] Memory guidance preserved
- [ ] Proactive behavior guidance preserved (consolidated)
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Prompt is ~50% shorter
- No functionality lost (same capabilities, cleaner instructions)
- Achievement focus visible in tone
- Personal assistant framing established
</success_criteria>

<output>
After completion, create `.planning/phases/16-system-prompt-refinement/16-01-SUMMARY.md`
</output>
