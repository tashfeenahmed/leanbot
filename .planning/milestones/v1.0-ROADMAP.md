# Milestone v1.0: Skills-Only Architecture

**Status:** SHIPPED 2026-02-04
**Phases:** 1-7
**Total Plans:** 11

## Overview

Complete skills-only architecture replacing hardcoded tools with discoverable skill files. Each skill is a markdown file with YAML frontmatter that the agent discovers and invokes contextually.

## Phases

### Phase 1: Skill System Foundation

**Goal**: Define SKILL.md format with YAML frontmatter, implement skill discovery, and create loading infrastructure
**Depends on**: None
**Plans**: 1/3 complete (remaining plans superseded by later phases)

Plans:
- [x] 01-01: Define SKILL.md schema and frontmatter format

**Details:**
- Created SKILL.md format with name, description, triggers in YAML frontmatter
- Implemented skill loader to scan skill directories
- Extended skill types for scripts support

### Phase 2: Bash Skill

**Goal**: Implement bash skill as first complete skill with scripts folder execution
**Depends on**: Phase 1
**Plans**: 2/2 complete

Plans:
- [x] 02-01: Create bash skill folder structure and SKILL.md
- [x] 02-02: Implement bash execution script with sandboxing

**Details:**
- Created bash skill with dangerous command detection and blocking
- Added working directory validation
- 60-second timeout, 30KB output truncation
- Exit code 126 for blocked commands, 124 for timeout

### Phase 3: Skill Executor

**Goal**: Build infrastructure to run skill scripts (spawn process, pass SKILL_ARGS, capture output)
**Depends on**: Phase 2
**Plans**: 1/1 complete

Plans:
- [x] 03-01: Create SkillExecutor class with script spawning, output capture, and timeout handling

**Details:**
- SKILL_ARGS passed as JSON environment variable (injection-safe)
- Support for .ts, .js, .sh script types
- 30-second default timeout
- 5-second grace period between SIGTERM and SIGKILL
- SKILL_DIR env var for workspace root

### Phase 4: Web Search Skill

**Goal**: Implement web search skill using Brave Search API
**Depends on**: Phase 3
**Plans**: 1/1 complete

Plans:
- [x] 04-01: Create web_search skill structure with SKILL.md and run.ts

**Details:**
- Native fetch() for API calls (Node.js 18+)
- user-invocable: true for slash command access

### Phase 5: Browser Skill

**Goal**: Implement browser skill for web page browsing and content extraction
**Depends on**: Phase 4
**Plans**: 1/1 complete

Plans:
- [x] 05-01: Create browser skill wrapping existing BrowserSession

**Details:**
- Wrapper pattern around existing BrowserSession singleton
- user-invocable: true for slash command access

### Phase 6: Telegram & Memory Skills

**Goal**: Implement telegram messaging and semantic memory search skills
**Depends on**: Phase 5
**Plans**: 2/2 complete

Plans:
- [x] 06-01: Create memory_search skill for semantic memory queries
- [x] 06-02: Create telegram_send skill wrapping existing functionality

**Details:**
- memory_search defaults to 'fact' type (not raw logs)
- Lazy singleton for MemoryStore/HybridSearch in skill scripts
- TelegramGateway singleton created and wired in Gateway initialization

### Phase 7: Agent Loop Refactor

**Goal**: Replace tool-based execution with skills-only agent loop
**Depends on**: Phase 6
**Plans**: 3/3 complete

Plans:
- [x] 07-01: Update system prompt to include skill descriptions
- [x] 07-02: Implement skill selection and invocation in agent loop
- [x] 07-03: Make toolRegistry optional and wire SkillExecutor in Gateway

**Details:**
- Generic skills reference in prompt (skills describe themselves via inputSchema)
- inputSchema optional in frontmatter for backward compatibility
- Skills are primary capability source; tools removed entirely

---

## Milestone Summary

**Key Decisions:**
- Skills-only (no tools): Simpler architecture, one abstraction for all capabilities
- Scripts in skill folders: Keep code near definition
- SKILL_ARGS as JSON env var: Prevents shell injection attacks
- 60s bash timeout, 30KB output limit: Prevents runaway commands and memory issues

**Issues Resolved:**
- Tool system complexity eliminated
- Skill discovery and loading implemented
- Script execution with proper sandboxing

**Issues Deferred:**
- read, write, edit skills (deferred to future milestone)

**Technical Debt Incurred:**
- None significant

---

_For current project status, see .planning/ROADMAP.md_
